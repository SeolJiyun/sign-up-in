<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Sign up</title>
    <script src="https://code.jquery.com/jquery-2.2.4.js"></script>
</head>
<style></style>

<body>
    <button type="button" id="hide" style="width: 100px; height: 50px;">숨기기</button>
    <button type="button" id="show" style="width: 100px; height: 50px;" hidden>보이기</button>

    <div id="signup_all">
        <form action="" accept-charset="UTF-8" id="signup_form" name="signup" method="post" onsubmit="return check()">
            <br>
            <fieldset style="width: 500px;">
                <legend>회원가입</legend><br>
                이름: <input type="text" class="user" id="username" name="username" value="" size="20" required /><br>
                아이디: <input type="text" class="user" id="userid" name="userid" value="" size="20" required /><br>
                비밀번호: <input type="password" class="user" id="userpw" name="userpw" id="userpw" value="" size="20"
                    required /><br>
                비밀번호 확인: <input type="password" class="user" id="userpwc" name="userpwc" id="userpwc" value="" size="20"
                    required />
                <button id="pwc_btn" type="button">확인</button><br>
                이메일: <input type="email" class="user" id="useremail" name="useremail" value="" size="20" required /><br>
                기타: <br>
                <textarea class="user" id="textView" style="width:300px; height:100px; border:solid 1px"
                    oncopy="return false" oncut="return false" onpaste="return false"></textarea><br>

                <input type="submit" id="submit_btn" value="가입하기" />
                <input type="reset" value="초기화" />
            </fieldset>
        </form><br>
        <div id="user_inform" hidden>
            <table border="1" width="400px">
                <th width="20%">요소</th>
                <th width="80%">가입정보</th>
                <tr>
                    <td>이름</td>
                    <td id="tdname"></td>
                </tr>
                <tr>
                    <td>아이디</td>
                    <td id="tdid"></td>
                </tr>
                <tr>
                    <td>비밀번호</td>
                    <td id="tdpw"></td>
                </tr>
                <tr>
                    <td>이메일</td>
                    <td id="tdmail"></td>
                </tr>
                <tr>
                    <td>기타</td>
                    <td id="tdtext"></td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        $(document).ready(function () {

            //비밀번호 확인 버튼 눌렀을 때
            $("#pwc_btn").click(function () {
                var pwck = pw_check();
                if (pwck == "enterPW") {
                    alert("비밀번호를 입력하세요");
                } else if (pwck == "enterPWC") {
                    alert("비밀번호 확인란을 입력하세요");
                } else if (pwck == "notMatch") {
                    alert("비밀번호가 일치하지 않습니다");
                } else if (pwck == true) {
                    alert("비밀번호가 일치합니다");
                }
            });

            //기타란 복붙금지
            $("#textView").bind('paste', function (e) {
                alert("붙여넣기 금지");
            });
            $("#textView").bind('copy', function (e) {
                alert("복사 금지");
            });
            $("#textView").bind('cut', function (e) {
                alert("잘라내기 금지");
            });

            // 숨기기 버튼
            $("#hide").click(function () {
                $('#signup_all').hide();
                $(this).hide();
                $("#show").show();
                $("#signup_form").each(function () {
                    this.reset();
                });
            });

            // 보이기 버튼
            $("#show").click(function () {
                $('#signup_all').show();
                $(this).hide();
                $("#hide").show();
            });
            
            //메일 확인
            $("#useremail").change(function () {
                var umail = $(this).val();
                mail_check(umail);

            });
        });

        // 함수
        ////////////////////////////////////////////
        // 가입하기 버튼 눌렀을 때, form 체크하는 함수
        function check() {

            var umail = mail_check($("#useremail").val());

            if (pw_check() != true) {
                $("#user_inform").hide();
                setTimeout(function () {
                    alert("비밀번호를 확인하세요");
                }, 500);
                return false;
            } else if (!umail) {
                return false;
            } else {
                return submit_success();
            }
            return false;
        }

        // 가입성공 시 테이블 출력
        function submit_success() {
            $("#user_inform").show();
            $("#tdname").text($("#username").val());
            $("#tdid").text($("#userid").val());
            $("#tdpw").text($("#userpw").val());
            $("#tdmail").text($("#useremail").val());
            if ($("#textView").val() == '') {
                $("#tdtext").text("-");
            } else {
                $("#tdtext").text($("#textView").val());
            }
            $("#signup_form").each(function () {
                this.reset();
            });
            return false;
        }

        // 메일 정규식 확인
        function mail_check(umail) {
            var phoneNumberRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;
            if (!phoneNumberRegex.test(umail)) {
                alert("이메일 형식을 다시 확인하세요");
                return false;
            } else {
                return true;
            }
        }

        // 비밀번호 확인 함수
        function pw_check() {
            var upw = $("#userpw").val();
            var upwc = $('#userpwc').val();
            if (upw == '') {
                return "enterPW";
            } else if (upwc == '') {
                return "enterPWC";
            } else if (upw !== upwc) {
                return "notMatch";
            } else {
                return true;
            }
        }
    </script>
</body>

</html>